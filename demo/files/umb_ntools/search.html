<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="style.css">
    <title>ntools</title>
</head>
<body>
    <div id="ntools-search-container">
        <div id="ntools-search">
            <form id="ntools-form">
                <span id='err' style='color:red'></span><br>
                <label class="search-text" for="ntools-search">Subject ID:</label>
                <input id="search-bar" type="text">
                <div id="radio-button-modes">
                        <label class="search-text"> Mode:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                        <label for="umb-rad-button">UMB</label>
                        <input name="mode" type="radio" id="umb-rad-button" value="UMB" checked>
                        <label for="nyu-rad-button">NYU</label>
                        <input name="mode" type="radio" id="nyu-rad-button" value="NYU">
                </div>
                <button type='button' id="submitbtn">Load Data!</button>
            </form>
            
        </div>
       </div>
                                                                                                                                        
    <script>
                                  
        function urlExists(url)
        {
            var http = new XMLHttpRequest();
            http.open('HEAD', url, false);
            http.send();
            return http.status!=404;
        }                          
        window.onload = function() {
            document.getElementById('submitbtn').onclick = function() {
                var subject = document.getElementById('search-bar').value;
                                  
                var mode = '';     
                var url = '';                  
                if (document.getElementById('umb-rad-button').checked) {
                    mode = 'UMB';
                     url = '../'+subject+'/'+subject+'.json';             
                } else {
                     mode = 'NYU';             
                     url = window.location.protocol+'//ievappwpdcpvm01.nyumc.org/?file='+subject+'.json';             
                }
                                  
                                                         
                                                      
                if (urlExists(url)) {
                                  
                
                    window.location.href = 'index.html?mode='+mode+'&subject='+subject;
                 } else {
                    document.getElementById('err').innerHTML = 'Data not found!';
                   console.log('Data not found!');                
                 }
             }
        }
    </script>
    
</body>
</html>
